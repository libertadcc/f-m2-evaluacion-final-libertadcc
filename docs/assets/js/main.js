"use strict";const url="http://api.tvmaze.com/search/shows?q=",btn=document.querySelector(".btn"),input=document.querySelector(".input"),results=document.querySelector(".results"),mySeriesTitle=document.querySelector(".my__series-title"),mySeries=document.querySelector(".my__series"),btnDelete=document.querySelector(".btn__delete");let arrFav=[];function search(){fetch(`${url}${input.value}`).then(e=>e.json()).then(e=>{results.innerHTML="";for(let t=0;t<e.length;t++){const a=document.createElement("li");a.classList.add("result__serie");const s=document.createElement("h2");s.classList.add("result__title");const n=document.createElement("img");n.classList.add("result__img");const i=e[t].show,r=document.createTextNode(`${i.name}`);null===i.image?(n.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),a.appendChild(n),n.setAttribute("alt",`Portada de ${i.name} no disponible`)):(n.setAttribute("src",`${i.image.medium}`),a.appendChild(n),n.setAttribute("alt",`Portada de ${i.name}`)),a.addEventListener("click",fav),s.appendChild(r),a.appendChild(s),a.appendChild(n),results.appendChild(a)}})}function fav(){event.currentTarget.classList.add("fav__serie");const e=event.currentTarget.firstChild;e.classList.add("fav__title");const t=event.currentTarget.lastChild;t.classList.add("fav__img");const a={title:`${e.innerHTML}`,photo:`${t.src}`};arrFav.push(a),saveData(),draw(arrFav)}function draw(e){mySeriesTitle.classList.remove("hidden"),btnDelete.classList.remove("hidden"),mySeries.innerHTML="";for(let t=0;t<e.length;t++){const a=document.createElement("ul");a.classList.add("fav__serie");const s=document.createElement("li");s.classList.add("my__serie");const n=document.createElement("h4");n.classList.add("my__title");const i=document.createElement("img");i.classList.add("my__image");const r=document.createElement("span");r.classList.add("my__icon");const d=document.createTextNode(`${e[t].title}`);r.innerHTML='<i class="fas fa-times-circle"></i>',i.setAttribute("src",`${e[t].photo}`),i.setAttribute("alt",`Portada de ${e[t].title}`),n.appendChild(d),s.appendChild(i),s.appendChild(n),s.appendChild(r),a.appendChild(s),mySeries.appendChild(a),r.addEventListener("click",clean)}}function saveData(){localStorage.setItem("favSeries",JSON.stringify(arrFav))}function deleteLocalStorage(){localStorage.removeItem("favSeries"),mySeries.innerHTML="",mySeriesTitle.classList.add("hidden"),btnDelete.classList.add("hidden"),arrFav=[]}function printFav(){const e=JSON.parse(localStorage.getItem("favSeries"));null!==e?draw(arrFav=e):(mySeriesTitle.classList.add("hidden"),btnDelete.classList.add("hidden"))}function clean(){const e=event.currentTarget;e.parentElement.remove(e)}btn.addEventListener("click",search),btnDelete.addEventListener("click",deleteLocalStorage),window.addEventListener("load",printFav);